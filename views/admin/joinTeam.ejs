<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin | Join Requests</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="shortcut icon"
    href="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0e7d49ef-31f4-4759-82b9-b486dc7aa23f.png"
    type="image/x-icon"
  />
</head>

<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 min-h-screen text-gray-100 flex flex-col">

  <!-- Navbar -->
  <header class="bg-gray-800/60 backdrop-blur-md border-b border-gray-700 p-4 flex justify-between items-center shadow-lg">
    <h1 class="text-2xl font-bold text-green-400 tracking-wide">Join Team Requests</h1>
    <nav class="flex gap-4 items-center">
      <a href="/admin/dashboard" class="text-gray-300 hover:text-green-400 transition">Dashboard</a>
      <a href="/logout" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
        Logout
      </a>
    </nav>
  </header>

  <!-- Main Content -->
  <main class="flex-grow p-8">
    <div class="max-w-7xl mx-auto bg-gray-900/70 backdrop-blur-lg border border-gray-700 rounded-2xl shadow-2xl p-8">
      <h2 class="text-2xl font-bold text-green-400 mb-6">Volunteer Applications</h2>

      <% if (requests.length === 0) { %>
        <p class="text-gray-400 text-center py-10">No join requests found yet.</p>
      <% } else { %>

      <div class="overflow-x-auto">
        <table class="min-w-full border border-gray-700 rounded-lg">
          <thead class="bg-gray-800 text-gray-300 uppercase text-sm">
            <tr>
              <th class="py-3 px-4 text-left border-b border-gray-700">Name</th>
              <th class="py-3 px-4 text-left border-b border-gray-700">Email</th>
              <th class="py-3 px-4 text-left border-b border-gray-700">Phone</th>
              <th class="py-3 px-4 text-left border-b border-gray-700">Department</th>
              <th class="py-3 px-4 text-left border-b border-gray-700">Year</th>
              <th class="py-3 px-4 text-left border-b border-gray-700">Interest</th>
              <th class="py-3 px-4 text-left border-b border-gray-700">Message</th>
              <th class="py-3 px-4 text-center border-b border-gray-700">Status</th>
              <th class="py-3 px-4 text-center border-b border-gray-700">Actions</th>
            </tr>
          </thead>

          <tbody class="text-gray-300">
            <% requests.forEach(request => { %>
              <tr class="hover:bg-gray-800/50 transition">
                <td class="py-3 px-4 border-b border-gray-700"><%= request.name %></td>
                <td class="py-3 px-4 border-b border-gray-700"><%= request.email %></td>
                <td class="py-3 px-4 border-b border-gray-700"><%= request.phone %></td>
                <td class="py-3 px-4 border-b border-gray-700"><%= request.department %></td>
                <td class="py-3 px-4 border-b border-gray-700"><%= request.year %></td>
                <td class="py-3 px-4 border-b border-gray-700"><%= request.interest %></td>
                <td class="py-3 px-4 border-b border-gray-700"><%= request.message %></td>
                <td class="py-3 px-4 border-b border-gray-700 text-center">
                  <% if (request.status === "Pending") { %>
                    <span class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-md text-xs font-semibold">
                      Pending
                    </span>
                  <% } else if (request.status === "Approved") { %>
                    <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-md text-xs font-semibold">
                      Approved
                    </span>
                  <% } else { %>
                    <span class="px-3 py-1 bg-red-500/20 text-red-400 rounded-md text-xs font-semibold">
                      Rejected
                    </span>
                  <% } %>
                </td>

                <td class="py-3 px-4 border-b border-gray-700 text-center">
                  <div class="flex justify-center gap-2">
                    <form action="/admin/join-team/<%= request._id %>/approve" method="POST">
                      <button class="bg-green-500 text-black px-3 py-1 rounded-md hover:bg-green-600 transition text-sm">
                        Approve
                      </button>
                    </form>

                    <form action="/admin/join-team/<%= request._id %>/reject" method="POST">
                      <button class="bg-red-500 text-white px-3 py-1 rounded-md hover:bg-red-600 transition text-sm">
                        Reject
                      </button>
                    </form>

                    <form action="/admin/join-team/<%= request._id %>?_method=DELETE" method="POST">
                      <button class="bg-gray-600 text-white px-3 py-1 rounded-md hover:bg-gray-700 transition text-sm">
                        Delete
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>

      <% } %>
    </div>
  </main>
</body>
</html>
